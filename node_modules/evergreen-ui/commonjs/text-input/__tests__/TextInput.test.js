"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _typeof = require("@babel/runtime/helpers/typeof");

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireWildcard(require("react"));

var _react2 = require("@testing-library/react");

var _userEvent = _interopRequireDefault(require("@testing-library/user-event"));

var _ = require("../");

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function makeTextInputFixture() {
  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return /*#__PURE__*/_react["default"].createElement(_.TextInput, (0, _extends2["default"])({
    "data-testid": "input"
  }, props));
}

makeTextInputFixture.displayName = "makeTextInputFixture";

function makeTextInputFieldFixture() {
  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return /*#__PURE__*/_react["default"].createElement(_.TextInputField, (0, _extends2["default"])({
    "data-testid": "input",
    label: "Name"
  }, props));
}

makeTextInputFieldFixture.displayName = "makeTextInputFieldFixture";
describe('TextInput', function () {
  it('Should render without crashing', function () {
    expect(function () {
      return (0, _react2.render)(makeTextInputFixture());
    }).not.toThrow();
  });
  it('Should accept placeholder text', function () {
    var _render = (0, _react2.render)(makeTextInputFixture({
      placeholder: 'Enter text here'
    })),
        getByPlaceholderText = _render.getByPlaceholderText;

    expect(getByPlaceholderText('Enter text here')).toBeInTheDocument();
  });
  it('Should set an invalid state if `isInvalid` is `true`', function () {
    var _render2 = (0, _react2.render)(makeTextInputFixture({
      isInvalid: true
    })),
        getByTestId = _render2.getByTestId;

    var input = getByTestId('input');
    expect(input).toHaveAttribute('aria-invalid', 'true');
  });
  it('Should accept an `onChange` handler to be a controlled component', function () {
    function ControlledTextInput() {
      var _useState = (0, _react.useState)(''),
          _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
          value = _useState2[0],
          setValue = _useState2[1];

      return /*#__PURE__*/_react["default"].createElement(_.TextInput, {
        "data-testid": "input",
        placeholder: "Enter text here",
        value: value,
        onChange: function onChange(e) {
          return setValue(e.target.value);
        }
      });
    }

    var _render3 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(ControlledTextInput, null)),
        getByDisplayValue = _render3.getByDisplayValue,
        getByTestId = _render3.getByTestId;

    var input = getByTestId('input');

    _userEvent["default"].click(input);

    expect(document.activeElement).toEqual(input);

    _userEvent["default"].type(input, 'Testing');

    expect(getByDisplayValue('Testing')).toEqual(input);
  });
  it('Should not be interactive if `disabled` is passed in', function () {
    var _render4 = (0, _react2.render)(makeTextInputFixture({
      disabled: true
    })),
        getByDisplayValue = _render4.getByDisplayValue,
        getByTestId = _render4.getByTestId;

    var input = getByTestId('input');

    _userEvent["default"].type(input, 'Testing');

    expect(function () {
      return getByDisplayValue('Testing');
    }).toThrowError();
    expect(getByDisplayValue('')).toEqual(input);
  });
});
describe('TextInputField', function () {
  it('Should render without crashing', function () {
    expect(function () {
      return (0, _react2.render)(makeTextInputFieldFixture());
    }).not.toThrow();
  });
  it('Should render a required `label` when passed in', function () {
    var _render5 = (0, _react2.render)(makeTextInputFieldFixture()),
        getByLabelText = _render5.getByLabelText;

    expect(getByLabelText('Name')).toBeInTheDocument();
  });
  it('Should render a `hint` underneath the input', function () {
    var _render6 = (0, _react2.render)(makeTextInputFieldFixture({
      hint: 'Enter a value in the input'
    })),
        getByText = _render6.getByText;

    expect(getByText('Enter a value in the input')).toBeInTheDocument();
  });
  it('Should render an astrix when `required` is passed in', function () {
    var _render7 = (0, _react2.render)(makeTextInputFieldFixture({
      required: true
    })),
        getByTitle = _render7.getByTitle;

    expect(getByTitle('This field is required.')).toBeInTheDocument();
  });
  it('Should not render a `validationMessage` when passed in', function () {
    var _render8 = (0, _react2.render)(makeTextInputFieldFixture({
      validationMessage: 'Please enter a value'
    })),
        getByText = _render8.getByText;

    expect(getByText('Please enter a value')).toBeInTheDocument();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZXh0LWlucHV0L19fdGVzdHNfXy9UZXh0SW5wdXQudGVzdC5qcyJdLCJuYW1lcyI6WyJtYWtlVGV4dElucHV0Rml4dHVyZSIsInByb3BzIiwibWFrZVRleHRJbnB1dEZpZWxkRml4dHVyZSIsImRlc2NyaWJlIiwiaXQiLCJleHBlY3QiLCJub3QiLCJ0b1Rocm93IiwicGxhY2Vob2xkZXIiLCJnZXRCeVBsYWNlaG9sZGVyVGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwiaXNJbnZhbGlkIiwiZ2V0QnlUZXN0SWQiLCJpbnB1dCIsInRvSGF2ZUF0dHJpYnV0ZSIsIkNvbnRyb2xsZWRUZXh0SW5wdXQiLCJ2YWx1ZSIsInNldFZhbHVlIiwiZSIsInRhcmdldCIsImdldEJ5RGlzcGxheVZhbHVlIiwidXNlckV2ZW50IiwiY2xpY2siLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJ0b0VxdWFsIiwidHlwZSIsImRpc2FibGVkIiwidG9UaHJvd0Vycm9yIiwiZ2V0QnlMYWJlbFRleHQiLCJoaW50IiwiZ2V0QnlUZXh0IiwicmVxdWlyZWQiLCJnZXRCeVRpdGxlIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7O0FBRUEsU0FBU0Esb0JBQVQsR0FBMEM7QUFBQSxNQUFaQyxLQUFZLHVFQUFKLEVBQUk7QUFDeEMsc0JBQU8sZ0NBQUMsV0FBRDtBQUFXLG1CQUFZO0FBQXZCLEtBQW1DQSxLQUFuQyxFQUFQO0FBQ0Q7O0FBRlFELG9COztBQUlULFNBQVNFLHlCQUFULEdBQStDO0FBQUEsTUFBWkQsS0FBWSx1RUFBSixFQUFJO0FBQzdDLHNCQUFPLGdDQUFDLGdCQUFEO0FBQWdCLG1CQUFZLE9BQTVCO0FBQW9DLElBQUEsS0FBSyxFQUFDO0FBQTFDLEtBQXFEQSxLQUFyRCxFQUFQO0FBQ0Q7O0FBRlFDLHlCO0FBSVRDLFFBQVEsQ0FBQyxXQUFELEVBQWMsWUFBTTtB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T0YseUJBQXlCLENBQUM7QUFBRWdDLE1BQUFBLGlCQUFpQixFQUFFO0FBQXJCLEtBQUQsQ0FBaEMsQ0FBdEI7QUFBQSxRQUFRSCxTQUFSLFlBQVFBLFNBQVI7O0FBQ0ExQixJQUFBQSxNQUFNLENBQUMwQixTQUFTLENBQUMsc0JBQUQsQ0FBVixDQUFOLENBQTBDckIsaUJBQTFDO0FBQ0QsR0FIQyxDQUFGO0FBSUQsQ0F4Qk8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcbmltcG9ydCB1c2VyRXZlbnQgZnJvbSAnQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50J1xuaW1wb3J0IHsgVGV4dElucHV0LCBUZXh0SW5wdXRGaWVsZCB9IGZyb20gJy4uLydcblxuZnVuY3Rpb24gbWFrZVRleHRJbnB1dEZpeHR1cmUocHJvcHMgPSB7fSkge1xuICByZXR1cm4gPFRleHRJbnB1dCBkYXRhLXRlc3RpZD1cImlucHV0XCIgey4uLnByb3BzfSAvPlxufVxuXG5mdW5jdGlvbiBtYWtlVGV4dElucHV0RmllbGRGaXh0dXJlKHByb3BzID0ge30pIHtcbiAgcmV0dXJuIDxUZXh0SW5wdXRGaWVsZCBkYXRhLXRlc3RpZD1cImlucHV0XCIgbGFiZWw9XCJOYW1lXCIgey4uLnByb3BzfSAvPlxufVxuXG5kZXNjcmliZSgnVGV4dElucHV0JywgKCkgPT4ge1xuICBpdCgnU2hvdWxkIHJlbmRlciB3aXRob3V0IGNyYXNoaW5nJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiByZW5kZXIobWFrZVRleHRJbnB1dEZpeHR1cmUoKSkpLm5vdC50b1Rocm93KClcbiAgfSlcblxuICBpdCgnU2hvdWxkIGFjY2VwdCBwbGFjZWhvbGRlciB0ZXh0JywgKCkgPT4ge1xuICAgIGNvbnN0IHsgZ2V0QnlQbGFjZWhvbGRlclRleHQgfSA9IHJlbmRlcihtYWtlVGV4dElucHV0Rml4dHVyZSh7IHBsYWNlaG9sZGVyOiAnRW50ZXIgdGV4dCBoZXJlJyB9KSlcbiAgICBleHBlY3QoZ2V0QnlQbGFjZWhvbGRlclRleHQoJ0VudGVyIHRleHQgaGVyZScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBzZXQgYW4gaW52YWxpZCBzdGF0ZSBpZiBgaXNJbnZhbGlkYCBpcyBgdHJ1ZWAnLCAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKG1ha2VUZXh0SW5wdXRGaXh0dXJlKHsgaXNJbnZhbGlkOiB0cnVlIH0pKVxuICAgIGNvbnN0IGlucHV0ID0gZ2V0QnlUZXN0SWQoJ2lucHV0JylcbiAgICBleHBlY3QoaW5wdXQpLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ3RydWUnKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgYWNjZXB0IGFuIGBvbkNoYW5nZWAgaGFuZGxlciB0byBiZSBhIGNvbnRyb2xsZWQgY29tcG9uZW50JywgKCkgPT4ge1xuICAgIGZ1bmN0aW9uIENvbnRyb2xsZWRUZXh0SW5wdXQoKSB7XG4gICAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKCcnKVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRleHRJbnB1dFxuICAgICAgICAgIGRhdGEtdGVzdGlkPVwiaW5wdXRcIlxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgdGV4dCBoZXJlXCJcbiAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0VmFsdWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAvPlxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHsgZ2V0QnlEaXNwbGF5VmFsdWUsIGdldEJ5VGVzdElkIH0gPSByZW5kZXIoPENvbnRyb2xsZWRUZXh0SW5wdXQgLz4pXG4gICAgY29uc3QgaW5wdXQgPSBnZXRCeVRlc3RJZCgnaW5wdXQnKVxuICAgIHVzZXJFdmVudC5jbGljayhpbnB1dClcbiAgICBleHBlY3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkudG9FcXVhbChpbnB1dClcbiAgICB1c2VyRXZlbnQudHlwZShpbnB1dCwgJ1Rlc3RpbmcnKVxuICAgIGV4cGVjdChnZXRCeURpc3BsYXlWYWx1ZSgnVGVzdGluZycpKS50b0VxdWFsKGlucHV0KVxuICB9KVxuXG4gIGl0KCdTaG91bGQgbm90IGJlIGludGVyYWN0aXZlIGlmIGBkaXNhYmxlZGAgaXMgcGFzc2VkIGluJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgZ2V0QnlEaXNwbGF5VmFsdWUsIGdldEJ5VGVzdElkIH0gPSByZW5kZXIobWFrZVRleHRJbnB1dEZpeHR1cmUoeyBkaXNhYmxlZDogdHJ1ZSB9KSlcbiAgICBjb25zdCBpbnB1dCA9IGdldEJ5VGVzdElkKCdpbnB1dCcpXG4gICAgdXNlckV2ZW50LnR5cGUoaW5wdXQsICdUZXN0aW5nJylcbiAgICBleHBlY3QoKCkgPT4gZ2V0QnlEaXNwbGF5VmFsdWUoJ1Rlc3RpbmcnKSkudG9UaHJvd0Vycm9yKClcbiAgICBleHBlY3QoZ2V0QnlEaXNwbGF5VmFsdWUoJycpKS50b0VxdWFsKGlucHV0KVxuICB9KVxufSlcblxuZGVzY3JpYmUoJ1RleHRJbnB1dEZpZWxkJywgKCkgPT4ge1xuICBpdCgnU2hvdWxkIHJlbmRlciB3aXRob3V0IGNyYXNoaW5nJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiByZW5kZXIobWFrZVRleHRJbnB1dEZpZWxkRml4dHVyZSgpKSkubm90LnRvVGhyb3coKVxuICB9KVxuXG4gIGl0KCdTaG91bGQgcmVuZGVyIGEgcmVxdWlyZWQgYGxhYmVsYCB3aGVuIHBhc3NlZCBpbicsICgpID0+IHtcbiAgICBjb25zdCB7IGdldEJ5TGFiZWxUZXh0IH0gPSByZW5kZXIobWFrZVRleHRJbnB1dEZpZWxkRml4dHVyZSgpKVxuICAgIGV4cGVjdChnZXRCeUxhYmVsVGV4dCgnTmFtZScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCByZW5kZXIgYSBgaGludGAgdW5kZXJuZWF0aCB0aGUgaW5wdXQnLCAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRCeVRleHQgfSA9IHJlbmRlcihtYWtlVGV4dElucHV0RmllbGRGaXh0dXJlKHsgaGludDogJ0VudGVyIGEgdmFsdWUgaW4gdGhlIGlucHV0JyB9KSlcbiAgICBleHBlY3QoZ2V0QnlUZXh0KCdFbnRlciBhIHZhbHVlIGluIHRoZSBpbnB1dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCByZW5kZXIgYW4gYXN0cml4IHdoZW4gYHJlcXVpcmVkYCBpcyBwYXNzZWQgaW4nLCAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRCeVRpdGxlIH0gPSByZW5kZXIobWFrZVRleHRJbnB1dEZpZWxkRml4dHVyZSh7IHJlcXVpcmVkOiB0cnVlIH0pKVxuICAgIGV4cGVjdChnZXRCeVRpdGxlKCdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLicpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ1Nob3VsZCBub3QgcmVuZGVyIGEgYHZhbGlkYXRpb25NZXNzYWdlYCB3aGVuIHBhc3NlZCBpbicsICgpID0+IHtcbiAgICBjb25zdCB7IGdldEJ5VGV4dCB9ID0gcmVuZGVyKG1ha2VUZXh0SW5wdXRGaWVsZEZpeHR1cmUoeyB2YWxpZGF0aW9uTWVzc2FnZTogJ1BsZWFzZSBlbnRlciBhIHZhbHVlJyB9KSlcbiAgICBleHBlY3QoZ2V0QnlUZXh0KCdQbGVhc2UgZW50ZXIgYSB2YWx1ZScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG59KVxuIl19