{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"/Users/macbookpro/Documents/GitHub/en-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _classCallCheck = require(\"/Users/macbookpro/Documents/GitHub/en-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/macbookpro/Documents/GitHub/en-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar isBrowser = typeof window !== 'undefined';\n\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet;\n  }\n\n  for (var i = 0; i < document.styleSheets.length; i += 1) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i];\n    }\n  }\n\n  return;\n}\n\nfunction makeStyleTag() {\n  var tag = document.createElement('style');\n  tag.type = 'text/css';\n  tag.setAttribute('data-ui-box', '');\n  tag.append(document.createTextNode(''));\n  (document.head || document.querySelector('head')).append(tag);\n  return tag;\n}\n\nvar CustomStyleSheet = /*#__PURE__*/function () {\n  function CustomStyleSheet() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, CustomStyleSheet);\n\n    this.tags = [];\n    this.ctr = 0;\n    this.injected = false;\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.maxLength = options.maxLength || 65000;\n  }\n\n  _createClass(CustomStyleSheet, [{\n    key: \"getSheet\",\n    value: function getSheet() {\n      return sheetForTag(last(this.tags));\n    }\n  }, {\n    key: \"inject\",\n    value: function inject() {\n      var _this = this;\n\n      if (this.injected) {\n        throw new Error('StyleSheet has already been injected.');\n      }\n\n      if (isBrowser) {\n        this.tags[0] = makeStyleTag();\n      } else {\n        this.sheet = {\n          cssRules: [],\n          insertRule: function insertRule(rule) {\n            _this.sheet.cssRules.push({\n              cssText: rule\n            });\n          }\n        };\n      }\n\n      this.injected = true;\n    }\n  }, {\n    key: \"speedy\",\n    value: function speedy(bool) {\n      if (this.ctr !== 0) {\n        throw new Error(\"StyleSheet cannot change speedy mode after inserting any rule to sheet. Either call speedy(\".concat(bool, \") earlier in your app, or call flush() before speedy(\").concat(bool, \")\"));\n      }\n\n      this.isSpeedy = Boolean(bool);\n    }\n  }, {\n    key: \"_insert\",\n    value: function _insert(sheet, rule) {\n      sheet.insertRule(rule, sheet.cssRules.length);\n    }\n  }, {\n    key: \"insert\",\n    value: function insert(rule) {\n      if (isBrowser) {\n        var sheet = this.getSheet();\n\n        if (this.isSpeedy && sheet && sheet.insertRule) {\n          this._insert(sheet, rule);\n        } else {\n          last(this.tags).append(document.createTextNode(rule));\n        }\n      } else if (this.sheet) {\n        this.sheet.insertRule(rule, this.sheet.cssRules.length);\n      }\n\n      this.ctr += 1;\n\n      if (isBrowser && this.ctr % this.maxLength === 0) {\n        this.tags.push(makeStyleTag());\n      }\n\n      return this.ctr - 1;\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      if (isBrowser) {\n        this.tags.forEach(function (tag) {\n          return tag.parentNode.removeChild(tag);\n        });\n        this.tags = [];\n        this.sheet = null;\n        this.ctr = 0;\n      } else if (this.sheet) {\n        this.sheet.cssRules = [];\n      }\n\n      this.injected = false;\n    }\n  }, {\n    key: \"rules\",\n    value: function rules() {\n      if (!isBrowser) {\n        return this.sheet ? this.sheet.cssRules : [];\n      }\n\n      var arr = [];\n      this.tags.forEach(function (tag) {\n        var sheet = sheetForTag(tag);\n\n        if (sheet) {\n          var rules = Array.from(sheet.cssRules);\n          arr.splice.apply(arr, [arr.length, 0].concat(_toConsumableArray(rules)));\n        }\n      });\n      return arr;\n    }\n  }]);\n\n  return CustomStyleSheet;\n}();\n\nexports.default = CustomStyleSheet;","map":{"version":3,"sources":["../../../src/utils/style-sheet.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst isBrowser = typeof window !== 'undefined';\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\nfunction sheetForTag(tag) {\n    if (tag.sheet) {\n        return tag.sheet;\n    }\n    for (let i = 0; i < document.styleSheets.length; i += 1) {\n        if (document.styleSheets[i].ownerNode === tag) {\n            return document.styleSheets[i];\n        }\n    }\n    return;\n}\nfunction makeStyleTag() {\n    const tag = document.createElement('style');\n    tag.type = 'text/css';\n    tag.setAttribute('data-ui-box', '');\n    tag.append(document.createTextNode(''));\n    (document.head || document.querySelector('head')).append(tag);\n    return tag;\n}\nclass CustomStyleSheet {\n    constructor(options = {}) {\n        this.tags = [];\n        this.ctr = 0;\n        this.injected = false;\n        this.isSpeedy = options.speedy === undefined\n            ? process.env.NODE_ENV === 'production'\n            : options.speedy;\n        this.maxLength = options.maxLength || 65000;\n    }\n    getSheet() {\n        return sheetForTag(last(this.tags));\n    }\n    inject() {\n        if (this.injected) {\n            throw new Error('StyleSheet has already been injected.');\n        }\n        if (isBrowser) {\n            this.tags[0] = makeStyleTag();\n        }\n        else {\n            this.sheet = {\n                cssRules: [],\n                insertRule: (rule) => {\n                    this.sheet.cssRules.push({ cssText: rule });\n                }\n            };\n        }\n        this.injected = true;\n    }\n    speedy(bool) {\n        if (this.ctr !== 0) {\n            throw new Error(`StyleSheet cannot change speedy mode after inserting any rule to sheet. Either call speedy(${bool}) earlier in your app, or call flush() before speedy(${bool})`);\n        }\n        this.isSpeedy = Boolean(bool);\n    }\n    _insert(sheet, rule) {\n        sheet.insertRule(rule, sheet.cssRules.length);\n    }\n    insert(rule) {\n        if (isBrowser) {\n            const sheet = this.getSheet();\n            if (this.isSpeedy && sheet && sheet.insertRule) {\n                this._insert(sheet, rule);\n            }\n            else {\n                last(this.tags).append(document.createTextNode(rule));\n            }\n        }\n        else if (this.sheet) {\n            this.sheet.insertRule(rule, this.sheet.cssRules.length);\n        }\n        this.ctr += 1;\n        if (isBrowser && this.ctr % this.maxLength === 0) {\n            this.tags.push(makeStyleTag());\n        }\n        return this.ctr - 1;\n    }\n    flush() {\n        if (isBrowser) {\n            this.tags.forEach(tag => tag.parentNode.removeChild(tag));\n            this.tags = [];\n            this.sheet = null;\n            this.ctr = 0;\n        }\n        else if (this.sheet) {\n            this.sheet.cssRules = [];\n        }\n        this.injected = false;\n    }\n    rules() {\n        if (!isBrowser) {\n            return (this.sheet ? this.sheet.cssRules : []);\n        }\n        const arr = [];\n        this.tags.forEach(tag => {\n            const sheet = sheetForTag(tag);\n            if (sheet) {\n                const rules = Array.from(sheet.cssRules);\n                arr.splice(arr.length, 0, ...[...rules]);\n            }\n        });\n        return arr;\n    }\n}\nexports.default = CustomStyleSheet;\n//# sourceMappingURL=style-sheet.js.map"]},"metadata":{},"sourceType":"script"}